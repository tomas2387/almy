var t={},i={},r={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(r,e,s,n){if(r&&"string"==typeof r&&(!Object.prototype.hasOwnProperty.call(t,r)||t[r]!==e||s)){if(t[r]=e,i[r])for(var o=0;o<i[r].length;++o)i[r][o](e);if("object"==typeof e&&!n)for(var a in e)e.hasOwnProperty(a)&&this.dispatch(r+"->"+a,e[a],s,!0);if(/->/.test(r)&&!n){var c=r.split("->"),f=c[0],p=c[1];t[f]||(t[f]={}),t[f][p]=e,this.dispatch(f,t[f],!0,!0)}}},subscribe:function(r,e){i[r]||(i[r]=[]),i[r].push(e),t[r]&&e(t[r])}};exports.almy=r;