var t={},i={},r={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(r,s,n,e){if(r&&"string"==typeof r&&(t[r]!==s||n)){if(t[r]=s,i[r])for(var f=0;f<i[r].length;++f)i[r][f](s);if("object"==typeof s&&!e)for(var a in s)s.hasOwnProperty(a)&&this.dispatch(r+"->"+a,s[a],n,!0);if(/->/.test(r)&&!e){var o=r.split("->"),c=o[0],p=o[1];t[c]||(t[c]={}),t[c][p]=s,this.dispatch(c,t[c],!0,!0)}}},subscribe:function(r,s){i[r]||(i[r]=[]),i[r].push(s),Object.prototype.hasOwnProperty.call(t,r)&&s(t[r])}};exports.almy=r;