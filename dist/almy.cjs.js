var t={},o={},e={create:function(){t={},o={}},state:function(o){return o?t[o]:t},dispatch:function(e,r,p,i,n){if(e&&"string"==typeof e&&(!Object.prototype.hasOwnProperty.call(t,e)||t[e]!==r||p)){if(t[e]=r,o[e])for(var a=0;a<o[e].length;++a)o[e][a](r);if("object"==typeof r&&null!==r&&!i)for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&this.dispatch(e+"->"+c,r[c],p,!1,!0);if(!n){var s=e.split("->");if(s.length>1){var f=s.pop(),l=s.join("->");t[l]&&"object"==typeof t[l]||(t[l]={}),t[l][f]=r,this.dispatch(l,t[l],!0,!0,!1)}}}},subscribe:function(e,r){e&&"string"==typeof e&&(o[e]||(o[e]=[]),o[e].push(r),Object.prototype.hasOwnProperty.call(t,e)&&r(t[e]))}};exports.almy=e;