var t={},i={},n={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(n,e,s,f,o){if(n&&"string"==typeof n&&(!Object.hasOwn(t,n)||t[n]!==e||s)){if(t[n]=e,i[n])for(var a=0;a<i[n].length;++a)i[n][a](e);if("object"==typeof e&&null!==e&&!f)for(var c in e)Object.hasOwn(e,c)&&this.dispatch(n+"->"+c,e[c],s,!1,!0);if(!o){var r=n.split("->");if(r.length>1){var p=r.pop(),h=r.join("->");t[h]&&"object"==typeof t[h]||(t[h]={}),t[h][p]=e,this.dispatch(h,t[h],!0,!0,!1)}}}},subscribe:function(n,e){n&&"string"==typeof n&&(i[n]||(i[n]=[]),i[n].push(e),Object.hasOwn(t,n)&&e(t[n]))}};exports.almy=n;