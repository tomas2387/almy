var t={},o={},e={create:function(){t={},o={}},state:function(o){return o?t[o]:t},dispatch:function(e,r,p,i,n){if(e&&"string"==typeof e&&(!Object.prototype.hasOwnProperty.call(t,e)||t[e]!==r||p)){if(t[e]=r,o[e])for(var c=0;c<o[e].length;++c)o[e][c](r);if("object"==typeof r&&null!==r&&!i)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&this.dispatch(e+"->"+a,r[a],p,!1,!0);if(!n){var f=e.split("->");if(f.length>1){var s=f.pop(),h=f.join("->");t[h]&&"object"==typeof t[h]||(t[h]={}),t[h][s]=r,this.dispatch(h,t[h],!0,!0,!1)}}}},subscribe:function(e,r){e&&"string"==typeof e&&(o[e]||(o[e]=[]),o[e].push(r),Object.prototype.hasOwnProperty.call(t,e)&&r(t[e]))}};export{e as almy};