var t={},i={},n={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(n,e,f,o,s){if(n&&"string"==typeof n&&(!Object.hasOwn(t,n)||t[n]!==e||f)){if(t[n]=e,i[n])for(var c=0;c<i[n].length;++c)i[n][c](e);if("object"==typeof e&&null!==e&&!o)for(var r in e)Object.hasOwn(e,r)&&this.dispatch(n+"->"+r,e[r],f,!1,!0);if(!s){var a=n.split("->");if(a.length>1){var p=a.pop(),h=a.join("->");t[h]&&"object"==typeof t[h]||(t[h]={}),t[h][p]=e,this.dispatch(h,t[h],!0,!0,!1)}}}},subscribe:function(n,e){n&&"string"==typeof n&&(i[n]||(i[n]=[]),i[n].push(e),Object.hasOwn(t,n)&&e(t[n]))}};export{n as almy};