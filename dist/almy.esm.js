var t={},i={},r={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(r,n,s,e){if(r&&"string"==typeof r&&(t[r]!==n||s)){if(t[r]=n,i[r])for(var f=0;f<i[r].length;++f)i[r][f](n);if("object"==typeof n&&!e)for(var o in n)n.hasOwnProperty(o)&&this.dispatch(r+"->"+o,n[o],s,!0);if(/->/.test(r)&&!e){var a=r.split("->"),c=a[0],p=a[1];t[c]||(t[c]={}),t[c][p]=n,this.dispatch(c,t[c],!0,!0)}}},subscribe:function(r,n){i[r]||(i[r]=[]),i[r].push(n),Object.prototype.hasOwnProperty.call(t,r)&&n(t[r])}};export{r as almy};