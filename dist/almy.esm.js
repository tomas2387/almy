var t={},o={},r={create:function(){t={},o={}},state:function(o){return o?t[o]:t},dispatch:function(r,e,i,n,p){if(r&&"string"==typeof r&&(!Object.prototype.hasOwnProperty.call(t,r)||t[r]!==e||i)){if(t[r]=e,o[r])for(var a=0;a<o[r].length;++a)o[r][a](e);if("object"==typeof e&&null!==e&&!n)for(var c in e)e.hasOwnProperty(c)&&this.dispatch(r+"->"+c,e[c],i,!1,!0);if(!p){var f=r.split("->");if(f.length>1){var s=f.pop(),h=f.join("->");t[h]&&"object"==typeof t[h]||(t[h]={}),t[h][s]=e,this.dispatch(h,t[h],!0,!0,!1)}}}},subscribe:function(r,e){o[r]||(o[r]=[]),o[r].push(e),Object.prototype.hasOwnProperty.call(t,r)&&e(t[r])}};export{r as almy};