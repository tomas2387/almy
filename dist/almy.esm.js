var t={},i={},n={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(n,e,o,f,r){if(n&&"string"==typeof n&&-1===n.indexOf("__proto__")&&(!Object.hasOwn(t,n)||t[n]!==e||o)){if(t[n]=e,i[n])for(var s=0;s<i[n].length;++s)i[n][s](e);if("object"==typeof e&&null!==e&&!f)for(var c in e)Object.hasOwn(e,c)&&this.dispatch(n+"->"+c,e[c],o,!1,!0);if(!r){var p=n.split("->");if(p.length>1){var a=p.pop(),h=p.join("->");t[h]&&"object"==typeof t[h]||(t[h]={}),t[h][a]=e,this.dispatch(h,t[h],!0,!0,!1)}}}},subscribe:function(n,e){n&&"string"==typeof n&&-1===n.indexOf("__proto__")&&(i[n]||(i[n]=[]),i[n].push(e),Object.hasOwn(t,n)&&e(t[n]))}};export{n as almy};