var t={},i={},r={create:function(){t={},i={}},state:function(i){return i?t[i]:t},dispatch:function(r,e,n,o){if(r&&"string"==typeof r&&(!Object.prototype.hasOwnProperty.call(t,r)||t[r]!==e||n)){if(t[r]=e,i[r])for(var s=0;s<i[r].length;++s)i[r][s](e);if("object"==typeof e&&!o)for(var a in e)e.hasOwnProperty(a)&&this.dispatch(r+"->"+a,e[a],n,!0);if(/->/.test(r)&&!o){var c=r.split("->"),f=c[0],p=c[1];t[f]||(t[f]={}),t[f][p]=e,this.dispatch(f,t[f],!0,!0)}}},subscribe:function(r,e){i[r]||(i[r]=[]),i[r].push(e),t[r]&&e(t[r])}};export{r as almy};