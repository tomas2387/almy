!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).almy={})}(this,function(t){var e={},n={},i={create:function(){e={},n={}},state:function(t){return t?e[t]:e},dispatch:function(t,i,f,o,s){if(t&&"string"==typeof t&&(!Object.hasOwn(e,t)||e[t]!==i||f)){if(e[t]=i,n[t])for(var a=0;a<n[t].length;++a)n[t][a](i);if("object"==typeof i&&null!==i&&!o)for(var c in i)Object.hasOwn(i,c)&&this.dispatch(t+"->"+c,i[c],f,!1,!0);if(!s){var p=t.split("->");if(p.length>1){var r=p.pop(),h=p.join("->");e[h]&&"object"==typeof e[h]||(e[h]={}),e[h][r]=i,this.dispatch(h,e[h],!0,!0,!1)}}}},subscribe:function(t,i){t&&"string"==typeof t&&(n[t]||(n[t]=[]),n[t].push(i),Object.hasOwn(e,t)&&i(e[t]))}};t.almy=i});