!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).almy={})}(this,function(t){var e={},i={},n={create:function(){e={},i={}},state:function(t){return t?e[t]:e},dispatch:function(t,n,o,f){if(t&&"string"==typeof t&&(!Object.prototype.hasOwnProperty.call(e,t)||e[t]!==n||o)){if(e[t]=n,i[t])for(var s=0;s<i[t].length;++s)i[t][s](n);if("object"==typeof n&&!f)for(var r in n)n.hasOwnProperty(r)&&this.dispatch(t+"->"+r,n[r],o,!0);if(/->/.test(t)&&!f){var p=t.split("->"),a=p[0],c=p[1];e[a]||(e[a]={}),e[a][c]=n,this.dispatch(a,e[a],!0,!0)}}},subscribe:function(t,n){i[t]||(i[t]=[]),i[t].push(n),e[t]&&n(e[t])}};t.almy=n});