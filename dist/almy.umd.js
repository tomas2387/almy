!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).almy={})}(this,function(t){var e={},o={},n={create:function(){e={},o={}},state:function(t){return t?e[t]:e},dispatch:function(t,n,i,f,p){if(t&&"string"==typeof t&&(!Object.prototype.hasOwnProperty.call(e,t)||e[t]!==n||i)){if(e[t]=n,o[t])for(var r=0;r<o[t].length;++r)o[t][r](n);if("object"==typeof n&&null!==n&&!f)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&this.dispatch(t+"->"+s,n[s],i,!1,!0);if(!p){var a=t.split("->");if(a.length>1){var c=a.pop(),l=a.join("->");e[l]&&"object"==typeof e[l]||(e[l]={}),e[l][c]=n,this.dispatch(l,e[l],!0,!0,!1)}}}},subscribe:function(t,n){t&&"string"==typeof t&&(o[t]||(o[t]=[]),o[t].push(n),Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))}};t.almy=n});