!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).almy={})}(this,(function(t){var e={},i={},n={create:function(){e={},i={}},state:function(t){return t?e[t]:e},dispatch:function(t,n,f,o){if(t&&"string"==typeof t&&(e[t]!==n||f)){if(e[t]=n,i[t])for(var s=0;s<i[t].length;++s)i[t][s](n);if("object"==typeof n&&!o)for(var r in n)n.hasOwnProperty(r)&&this.dispatch(t+"->"+r,n[r],f,!0);if(/->/.test(t)&&!o){var c=t.split("->"),p=c[0],a=c[1];e[p]||(e[p]={}),e[p][a]=n,this.dispatch(p,e[p],!0,!0)}}},subscribe:function(t,n){i[t]||(i[t]=[]),i[t].push(n),Object.prototype.hasOwnProperty.call(e,t)&&n(e[t])}};t.almy=n}));