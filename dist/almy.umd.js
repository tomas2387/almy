!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).almy={})}(this,(function(t){var e={},i={},n={create:function(){e={},i={}},state:function(t){return t?e[t]:e},dispatch:function(t,n,o,f){if(t&&"string"==typeof t&&(!Object.prototype.hasOwnProperty.call(e,t)||e[t]!==n||o)){if(e[t]=n,i[t])for(var r=0;r<i[t].length;++r)i[t][r](n);if("object"==typeof n&&!f)for(var s in n)n.hasOwnProperty(s)&&this.dispatch(t+"->"+s,n[s],o,!0);if(/->/.test(t)&&!f){var p=t.split("->"),c=p[0],a=p[1];e[c]||(e[c]={}),e[c][a]=n,this.dispatch(c,e[c],!0,!0)}}},subscribe:function(t,n){i[t]||(i[t]=[]),i[t].push(n),e[t]&&n(e[t])}};t.almy=n}));